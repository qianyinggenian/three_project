{"version":3,"file":"js/548.e17ddd2d.js","mappings":"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","sources":["webpack://three_project/./node_modules/core-js/modules/es.iterator.for-each.js","webpack://three_project/./src/views/three/gltfView.vue","webpack://three_project/src/views/three/gltfView.vue","webpack://three_project/./src/views/three/gltfView.vue?9b17","webpack://three_project/./src/views/three/gltfView.vue?733c"],"sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar forEachWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('forEach', TypeError);\n\n// `Iterator.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.foreach\n$({ target: 'Iterator', proto: true, real: true, forced: forEachWithoutClosingOnEarlyError }, {\n  forEach: function forEach(fn) {\n    anObject(this);\n    try {\n      aCallable(fn);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (forEachWithoutClosingOnEarlyError) return call(forEachWithoutClosingOnEarlyError, this, fn);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    iterate(record, function (value) {\n      fn(value, counter++);\n    }, { IS_RECORD: true });\n  }\n});\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"upload-container\"},[_c('div',{staticClass:\"tabs-box\"},_vm._l((_vm.tabs),function(item,index){return _c('div',{key:index,staticClass:\"tab\",class:_vm.activeTab === item.value ? 'active-tab': '',on:{\"click\":function($event){return _vm.handleClickTab(item)}}},[_vm._v(\" \"+_vm._s(item.label))])}),0),(_vm.activeTab === '动态')?_c('el-upload',{attrs:{\"action\":\"\",\"before-upload\":_vm.handlePreview}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"}},[_vm._v(\"上传文件\")])],1):_vm._e(),_c('span',{staticClass:\"fileName\"},[_vm._v(\"模型名称：\"+_vm._s(_vm.fileName))])],1),_c('div',{ref:\"webglRef\",staticClass:\"three-container\",attrs:{\"id\":\"webgl-output\"}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div class=\"upload-container\">\n      <div class=\"tabs-box\">\n        <div class=\"tab\"\n             v-for=\"(item,index) in tabs\"\n             :key=\"index\"\n             :class=\"activeTab === item.value ? 'active-tab': ''\"\n             @click=\"handleClickTab(item)\"\n        >\n          {{ item.label }}</div>\n      </div>\n      <el-upload action=\"\" :before-upload=\"handlePreview\" v-if=\"activeTab === '动态'\">\n        <el-button type=\"primary\" size=\"small\">上传文件</el-button>\n      </el-upload>\n      <span class=\"fileName\">模型名称：{{fileName}}</span>\n    </div>\n\n    <div ref=\"webglRef\" id=\"webgl-output\" class=\"three-container\"></div>\n  </div>\n</template>\n\n<script>\nimport * as THREE from 'three';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader';\nimport { getResourcePath } from '@/common/js/utils';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\n\nimport { GUI } from 'three/examples/jsm/libs/dat.gui.module.js';\n// let water;\nlet renderer;\nlet scene;\nlet camera;\nlet controls;\nlet directionalLight1, directionalLight2, ambientLight;\nlet gui;\nexport default {\n  name: 'index',\n  components: {},\n  data () {\n    return {\n      tabs: [\n        {\n          label: '默认',\n          value: '默认'\n        },\n        {\n          label: '动态',\n          value: '动态'\n        }\n      ],\n      scene: null,\n      // camera: null,\n      controls: null,\n      // renderer: null,\n      webglRef: null,\n      fileName: '洪奇沥大桥.gltf',\n      activeTab: '默认'\n    };\n  },\n  props: {},\n  watch: {},\n  computed: {},\n  mounted () {\n    // this.init();\n    if (this.activeTab === '默认') {\n      this.init();\n    }\n  },\n  methods: {\n    handleClickTab (item) {\n      this.activeTab = item.value;\n      this.cleanupScene();\n      this.destroyGUI();\n      if (this.activeTab === '默认') {\n        this.$nextTick(() => {\n          this.init();\n        });\n      }\n    },\n    init () {\n      if (!scene) {\n        const el = this.$refs.webglRef;\n        scene = new THREE.Scene();\n        // 设置摄像机\n        camera = new THREE.PerspectiveCamera(55, el.clientWidth / el.clientHeight, 1, 20000);\n        // 创建渲染器\n        renderer = new THREE.WebGLRenderer({\n          antialias: true,\n          logarithmicDepthBuffer: true\n        });\n        // 设置渲染器的初始颜色\n        renderer.setClearColor(new THREE.Color(0x87ceeb));\n        // 设置输出canvas画面的大小\n        renderer.setSize(el.clientWidth, el.clientHeight);\n        //   设置渲染器的像素比\n        renderer.setPixelRatio(window.devicePixelRatio);\n        renderer.physicallyCorrectLights = true;\n        renderer.outputEncoding = THREE.sRGBEncoding;\n        // 设置渲染物体阴影\n        renderer.shadowMap.enabled = true;\n\n        // 定位相机，并且指向场景中心\n        // camera.position.set(0, 339.5358612533638, 807.6822095787198);\n        camera.position.set(125.7512205654842, 57.58951477003565, 701.0900594107068);\n        // camera.position.set(200, 500, 250);\n        camera.lookAt(scene.position);\n        // 将渲染器输出添加html元素中\n        el.appendChild(renderer.domElement);\n        renderer.render(scene, camera);\n      }\n      // 创建controls对象;\n      this.addControls();\n      this.addAxesHelper();\n      this.addBridge();\n      this.addAmbientLight();\n      this.addDirectionalLight();\n      this.initGUI();\n\n      this.$nextTick(() => {\n        this.render();\n      });\n    },\n    render () {\n      controls && controls.update();\n      renderer && renderer.render(scene, camera);\n      requestAnimationFrame(this.render);\n    },\n    addBridge () {\n      const dracoLoader = new DRACOLoader();\n      const dracoUrl = getResourcePath('/static/draco/gltf/', 'three_project');\n      dracoLoader.setDecoderPath(dracoUrl);\n\n      const loader = new GLTFLoader();\n      loader.setDRACOLoader(dracoLoader);\n      let glbUrl;\n      if (this.activeTab === '动态') {\n        glbUrl = this.previewPath;\n      } else {\n        glbUrl = getResourcePath('/static/digital/models/洪奇沥大桥.gltf', 'three_project');\n      }\n      // loader.load('/static/models/gltf/LittlestTokyo.glb', function (gltf) {\n      loader.load(glbUrl, function (gltf) {\n        const model = gltf.scene;\n        // model.position.set(1, 1, 1);\n        // model.scale.set(0.01, 0.01, 0.01);\n        scene.add(model);\n      }, undefined, function (e) {\n        console.error(e);\n      });\n    },\n    addControls () {\n      controls = new OrbitControls(camera, renderer.domElement);\n      // controls.maxPolarAngle = Math.PI * 0.495;\n      // controls.target.set(50, 250, 250);\n      controls.target.set(0, 0, 0);\n      // controls.minDistance = 5.0;\n      // controls.maxDistance = 500.0;\n    },\n    addAxesHelper () {\n      const axes = new THREE.AxesHelper(20000);\n      // 添加坐标系到场景中\n      scene.add(axes);\n      const material1 = new THREE.LineBasicMaterial({\n        color: 0xff9881\n      });\n      const points1 = [];\n      points1.push(new THREE.Vector3(0, 0, 0));\n      points1.push(new THREE.Vector3(-2000, 0, 0));\n\n      const geometry1 = new THREE.BufferGeometry().setFromPoints(points1);\n\n      const line1 = new THREE.Line(geometry1, material1);\n      scene.add(line1);\n      const material2 = new THREE.LineBasicMaterial({\n        color: 0x073d8d\n      });\n\n      const points2 = [];\n      points2.push(new THREE.Vector3(0, 0, 0));\n      points2.push(new THREE.Vector3(0, 0, -2000));\n\n      const geometry2 = new THREE.BufferGeometry().setFromPoints(points2);\n\n      const line2 = new THREE.Line(geometry2, material2);\n      scene.add(line2);\n    },\n    addAmbientLight () {\n      ambientLight = new THREE.AmbientLight(0xeeb584); //\n      ambientLight.position.set(0, 1000, 500);\n      scene.add(ambientLight);\n    },\n    addDirectionalLight () {\n      directionalLight1 = new THREE.DirectionalLight(0xeeb584, 10);\n      directionalLight1.position.set(300, -100, 300);\n      directionalLight2 = new THREE.DirectionalLight(0xeeb584, 10);\n      directionalLight2.position.set(10, 250, -500);\n      scene.add(directionalLight1);\n      scene.add(directionalLight2);\n    },\n\n    handlePreview (file) {\n      this.fileName = file.name;\n      const reader = new FileReader();\n      reader.onload = async (e) => {\n        this.previewPath = e.target.result; // data:image/png;base64...:ml-citation{ref=\"4,7\" data=\"citationList\"}\n\n        this.cleanupScene();\n        this.destroyGUI();\n        await this.init();\n      };\n      reader.readAsDataURL(file);\n      return false; // 阻止自动上传\n    },\n\n    initGUI () {\n      // 创建 GUI\n      gui = new GUI();\n\n      // 添加调试选项：相机位置\n      const cameraFolder = gui.addFolder('Camera Position');\n      cameraFolder.add(camera.position, 'x', -50000, 50000).name('Position X').step(0.01).onChange(this.render);\n      cameraFolder.add(camera.position, 'y', -50000, 50000).name('Position Y').step(0.01).onChange(this.render);\n      cameraFolder.add(camera.position, 'z', -50000, 50000).name('Position Z').step(0.01).onChange(this.render);\n      cameraFolder.open();\n\n      // 添加调试选项：相机目标点\n      const targetFolder = gui.addFolder('Camera Target');\n      const target = new THREE.Vector3(); // 创建一个目标点向量\n      controls.target.copy(target); // 初始化目标点\n      targetFolder.add(target, 'x', -50000, 50000).name('Target X').step(0.01).onChange(() => {\n        controls.target.copy(target); // 更新目标点\n        controls.update();\n        this.render();\n      });\n      targetFolder.add(target, 'y', -50000, 50000).name('Target Y').step(0.01).onChange(() => {\n        controls.target.copy(target);\n        controls.update();\n        this.render();\n      });\n      targetFolder.add(target, 'z', -50000, 50000).name('Target Z').step(0.01).onChange(() => {\n        controls.target.copy(target);\n        controls.update();\n        this.render();\n      });\n      targetFolder.open();\n      // 添加调试选项：DirectionalLight1 的颜色\n      const light1Folder = gui.addFolder('Directional Light 1');\n      const light1Color = { color: '#ffeeff' }; // 初始颜色（十六进制字符串）\n      light1Folder.addColor(light1Color, 'color').name('Color').onChange((value) => {\n        directionalLight1.color.set(value); // 更新光源颜色\n        this.render();\n      });\n      light1Folder.add(directionalLight1.position, 'x', -50000, 50000).name('Position X').step(0.1).onChange(this.render);\n      light1Folder.add(directionalLight1.position, 'y', -50000, 50000).name('Position Y').step(0.1).onChange(this.render);\n      light1Folder.add(directionalLight1.position, 'z', -50000, 50000).name('Position Z').step(0.1).onChange(this.render);\n      light1Folder.add(directionalLight1, 'intensity', 0, 20).name('Intensity').step(0.1).onChange(this.render);\n      light1Folder.open();\n\n      // 添加调试选项：DirectionalLight2 的颜色\n      const light2Folder = gui.addFolder('Directional Light 2');\n      const light2Color = { color: '#ffffff' }; // 初始颜色（十六进制字符串）\n      light2Folder.addColor(light2Color, 'color').name('Color').onChange((value) => {\n        directionalLight2.color.set(value); // 更新光源颜色\n        this.render();\n      });\n      light2Folder.add(directionalLight2.position, 'x', -50000, 50000).name('Position X').step(0.1).onChange(this.render);\n      light2Folder.add(directionalLight2.position, 'y', -50000, 50000).name('Position Y').step(0.1).onChange(this.render);\n      light2Folder.add(directionalLight2.position, 'z', -50000, 50000).name('Position Z').step(0.1).onChange(this.render);\n      light2Folder.add(directionalLight2, 'intensity', 0, 20).name('Intensity').step(0.1).onChange(this.render);\n      light2Folder.open();\n\n      // 添加调试选项：AmbientLight 的颜色和强度\n      const ambientLightFolder = gui.addFolder('Ambient Light');\n      const ambientLightColor = { color: '#ffffee' }; // 初始颜色（十六进制字符串）\n      ambientLightFolder.addColor(ambientLightColor, 'color').name('Color').onChange((value) => {\n        ambientLight.color.set(value); // 更新环境光颜色\n        this.render();\n      });\n      ambientLightFolder.add(ambientLight, 'intensity', 0, 20).name('Intensity').step(0.1).onChange(this.render);\n      ambientLightFolder.open();\n    },\n    cleanupScene () {\n      if (renderer) {\n        renderer.dispose();\n        renderer.forceContextLoss();\n        renderer.domElement.remove();\n        renderer = null;\n      }\n\n      if (scene) {\n        scene.traverse((object) => {\n          if (object.geometry) object.geometry.dispose();\n          if (object.material) {\n            if (Array.isArray(object.material)) {\n              object.material.forEach((material) => material.dispose());\n            } else {\n              object.material.dispose();\n            }\n          }\n          if (object.texture) object.texture.dispose();\n        });\n        scene = null;\n      }\n\n      if (camera) {\n        camera = null;\n      }\n\n      if (controls) {\n        controls.dispose();\n        controls = null;\n      }\n\n      // window.removeEventListener('resize', this.onWindowResize);\n    },\n    onWindowResize () {\n      camera.aspect = this.$refs.threeContainer.clientWidth / this.$refs.threeContainer.clientHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(this.$refs.threeContainer.clientWidth, this.$refs.threeContainer.clientHeight);\n\n      this.render();\n    },\n    destroyGUI () {\n      if (gui) {\n        gui.destroy(); // 销毁 dat.GUI 实例\n        gui = null;\n      }\n    }\n  },\n  beforeDestroy () {\n    // 销毁 GUI\n    this.cleanupScene();\n    this.destroyGUI();\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.webglRef {\n  width: 887px;\n  height: 531px;\n}\n.container {\n  height: 100%;\n  width: 100%;\n  .upload-container {\n    height: 50px;\n    padding-left: 16px;\n    display: flex;\n    align-items: center;\n    .fileName {\n      margin-left: 16px;\n    }\n    .tabs-box {\n      display: flex;\n      margin-right: 16px;\n      .tab {\n        box-sizing: border-box;\n        padding: 5px 16px;\n        border: 1px  solid #ccc;\n        cursor: pointer;\n        &:first-child {\n          border-radius: 8px 0 0 8px;\n        }\n        &:last-child {\n          border-radius: 0 8px 8px 0;\n        }\n      }\n      .active-tab {\n        background: #409eff;\n        color: white;\n        border: 1px  solid #409eff;\n      }\n    }\n  }\n  .three-container {\n    height: calc(100% - 50px);\n    width: 100%;\n    border: 1px solid #ccc;\n    box-sizing: border-box;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./gltfView.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./gltfView.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./gltfView.vue?vue&type=template&id=39ea2387&scoped=true\"\nimport script from \"./gltfView.vue?vue&type=script&lang=js\"\nexport * from \"./gltfView.vue?vue&type=script&lang=js\"\nimport style0 from \"./gltfView.vue?vue&type=style&index=0&id=39ea2387&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39ea2387\",\n  null\n  \n)\n\nexport default component.exports"],"names":["$","call","iterate","aCallable","anObject","getIteratorDirect","iteratorClose","iteratorHelperWithoutClosingOnEarlyError","forEachWithoutClosingOnEarlyError","TypeError","target","proto","real","forced","forEach","fn","this","error","record","counter","value","IS_RECORD","render","_vm","_c","_self","staticClass","_l","tabs","item","index","key","class","activeTab","on","$event","handleClickTab","_v","_s","label","attrs","handlePreview","_e","fileName","ref","staticRenderFns","renderer","scene","camera","controls","directionalLight1","directionalLight2","ambientLight","gui","name","components","data","webglRef","props","watch","computed","mounted","init","methods","cleanupScene","destroyGUI","$nextTick","el","$refs","THREE","clientWidth","clientHeight","antialias","logarithmicDepthBuffer","setClearColor","setSize","setPixelRatio","window","devicePixelRatio","physicallyCorrectLights","outputEncoding","shadowMap","enabled","position","set","lookAt","appendChild","domElement","addControls","addAxesHelper","addBridge","addAmbientLight","addDirectionalLight","initGUI","update","requestAnimationFrame","dracoLoader","DRACOLoader","dracoUrl","getResourcePath","setDecoderPath","loader","GLTFLoader","glbUrl","setDRACOLoader","previewPath","load","gltf","model","add","undefined","e","console","OrbitControls","axes","material1","color","points1","push","geometry1","setFromPoints","line1","material2","points2","geometry2","line2","file","reader","FileReader","onload","result","readAsDataURL","GUI","cameraFolder","addFolder","step","onChange","open","targetFolder","copy","light1Folder","light1Color","addColor","light2Folder","light2Color","ambientLightFolder","ambientLightColor","dispose","forceContextLoss","remove","traverse","object","geometry","material","Array","isArray","texture","onWindowResize","aspect","threeContainer","updateProjectionMatrix","destroy","beforeDestroy","component"],"sourceRoot":""}